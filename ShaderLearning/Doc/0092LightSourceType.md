# Unity 的光源类型

在之前的例子中 , 我们的场景中都只有一个光源 , 且光源类型是平行光 . 在本节 , 我们需要在 Unity Shader 中处理更复杂的光源类型以及数目更多的光源 . Unity 一共支持 4 种光源类型 : 平行光 , 点光源 , 聚光灯和面光源 ( area light ) . 面光源仅在烘焙时才可发挥作用 , 因此不在本节讨论范围内 . 由于每种光源的几何定义不同 , 因此它们对应的光源属性也就各不相同 . 这就要求我们要区别对待它们 .

## 光源类型的影响

我们来看一下光源类型的不同到底会给 Shader 带来哪些影响 .
在 Shader 中 , 最常使用的光源属性有光源的**位置** , **方向** ( 再具体一点就是到某点的方向 ) , **颜色** , **强度**以及**衰减** ( 到某点的衰减 , 与该点到光源的距离有关 ) 这 5 个属性 . 而这些属性和它们的几何定义息息相关 .

### 平行光

平行光的几何定义是最简单的 . 平行光可以照亮的范围是没有限制的 , 它通常作为太阳这样的角色在场景中出现 . 平行光之所以简单 , 是因为没有它没有一个唯一的**位置** , 也就是说 , 它可以放在场景中的任意位置 . 除此之外 , 平行光也没有**衰减**的概念 , 也就是说 , 平行光的**光照强度**不会随着距离而发生变化 . 它的几何属性只有**方向** , 我们可以调整平行光的 Transform 组件中的 Rotation 属性类改变它的光源方向 , 而且平行光到场景中所有点的方向都是一样的 , 这也是平行光名字的由来 .

### 点光源

点光源的照亮空间是由一个球体定义的 . 球体的半径可以由面板中的 Range 属性来调整 . 点光源是有**位置**属性的 , 它由点光源的 Transform 组件的 Position 属性定义的 . 对于**方向**属性 , 我们需要用点光源的位置减去某点的位置来得到它到该点的方向 . 点光源的**颜色**和**强度**可以在 Light 组件面板中调整 . 同时 , 点光源也是会**衰减**的 , 随着物体逐渐远离光源 , 它接收到的光照强度也会逐渐减小 . 点光源球心处的光照强度最强 , 球体边界处的最弱 , 值为 0 . 其中间的衰减值可以由一个函数定义 .

### 聚光灯

聚光灯是这 3 种光源类型中最复杂的一种 . 它的照亮空间是由空间中的一块锥形区域定义的 . 这块锥形区域的半径由面板中的 Range 属性决定 , 而锥体的张开角度由 Spot Angle 属性决定 . 聚光灯的位置同样是由 Transform 组件的 Position 属性定义的 . 对于方向属性 , 我们需要用聚光灯的位置减去某点的位置来得到它到该点的方向 . 聚光灯的衰减也是随着物体逐渐远离点光源而逐渐减小 , 在锥形的顶点处光照强度最强 , 在锥形的边界处强度为 0 . 其中间的衰减值可以由一个函数定义 .